# zDream 追梦
一个基于mORMot和Lazarus的架构验证系统。

烟囱式系统架构，各个系统以数据孤岛、应用孤岛的形式存在；为实现系统间交互，各系统又以API等接口形式，向其它系统提供交互服务能力；当这样的系统多到一定程度，系统间形成蜘蛛网式的互联结构，数据一致性成为问题；这时，大家又开始采用ESB总线，解决蜘蛛网架构，但数据一致性仍然无法保证。

造成这些困惑的根本原因个人认为是数据孤岛问题，每个应用都有自己的数据库，自己的数据定义。

系统设计的一个基本原则就是将多处存在的相似代码抽象为更基础的公共代码，如果将诸如机构、人员、产品、订单、装运、用户、角色、权限等每个应用均需要的数据结构抽象为一个公共的数据平台，以数据服务的形式开放给其它应用调用，就可以实现数据在各应用中的共享，达到数据治理的目的，也可以让各应用系统更专注于业务设计，在大型IT项目中可以显著降低综合开发成本。

这样的架构，对于存在大量存量遗留系统的企业，则可以按照新建项目基于新的公共数据平台进行建设，而存量遗留系统则基于公共数据平台进行接口重构，重新定义基于公共数据平台的服务接口，并作为新的接口标准提供服务，服务调用的结果会在公共数据平台生成唯一的用户、产品、订单等数据ID，最后调用遗留系统的接口，真正完成服务处理，并将遗留系统的相关数据ID与公共数据平台数据ID相关联，达到数据治理的目的。

在重新定义基于公共数据平台的服务接口的过程中，对于一些新建系统、遗留系统中相似的接口服务可以进行整合性包装，以条件分支的形式分别跳转各系统完成实际的业务处理，这样就可以只提供一个标准的服务接口，而无需提供多个服务接口，达到服务治理的目的。

后来，外出学习交流的过程中，我才知道大家将这种架构称之为中台架构，或者姑且将上述架构设想理解为我个人理解的中台架构的基本原理吧。

## zDream架构

四层微服务架构：

### 1st_core

数据核心层，公共数据服务平台，参考《数据模型资源手册》，按照灵活、可配置化的模式，生成一个公共的数据服务核心，由于需要同时满足多个业务系统的数据结构要求，所以工作量比较大，但对于大型业务系统，这样的开销是值得的。

按照《数据模型资源手册》建设的灵活、可配置化的数据核心，大家称之为用户中心、产品工厂、订单中心等，又孤陋寡闻了，哈。

### 2nd_business

业务层，新建的业务系统，或遗留系统的服务借口二次包装，都在这一层实现。遗留系统的接口在该层进行二次包装，对后续层级的服务提供，均由新接口统一提供，达到服务治理的目的。

### 3rd_app

应用层，将业务层暴露的服务进行全流程的业务整合，实现跨系统、跨渠道的业务协同能力，提供诸如产品从浏览、下单、支付、收货确认、评价的全生命周期管理，并将业务能力提供前端（Web或APP）进行呈现。

### 4th_client

表现层，基于应用层整合的服务能力，提供交付客户使用的Web或APP前端产品。